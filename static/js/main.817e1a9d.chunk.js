(this["webpackJsonpbes-chan"]=this["webpackJsonpbes-chan"]||[]).push([[0],{19:function(e,t,n){e.exports={postContainer:"Post_postContainer__2H-c_",Post:"Post_Post__368RX",postImage:"Post_postImage__1hEu_",posterInfo:"Post_posterInfo__2JSeC",postText:"Post_postText__1BiIH"}},25:function(e,t,n){e.exports={Thread:"SingleThread_Thread__1IKCH"}},26:function(e,t,n){e.exports={hideContainer:"HideElement_hideContainer__3kN_x",text:"HideElement_text__3KNsx"}},30:function(e,t,n){e.exports={postImage:"Image_postImage__2_ySV"}},32:function(e,t,n){e.exports={button:"Button_button__6-R6B"}},33:function(e,t,n){e.exports={expandThread:"ExpandThread_expandThread__N25cj",expand:"ExpandThread_expand__2uuWh"}},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},54:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var c=n(3),s=n.n(c),a=n(29),i=n.n(a),r=(n(40),n(5)),o=(n(41),n(6)),d=n(7),l=(n(42),n(19)),j=n.n(l),u=n(30),b=n.n(u),h=n(2),x=function(e){var t=Object(c.useState)({maxHeight:"15vh"}),n=Object(r.a)(t,2),s=n[0],a=n[1];return Object(h.jsx)("img",{onClick:function(){"15vh"===s.maxHeight?a({maxHeight:"45vh"}):a({maxHeight:"15vh"})},src:e.src,className:b.a.postImage,style:s})},p=n(26),O=n.n(p),m=n(31),f=function(e){return Object(h.jsxs)("div",{onClick:e.onClick,className:O.a.hideContainer,children:[Object(h.jsx)(m.a,{color:"#00ff46"}),Object(h.jsx)("div",{className:O.a.text,children:e.text})]})};var v=function(e){var t=Object(c.useState)(!0),n=Object(r.a)(t,2),s=n[0],a=n[1],i=Object(c.useState)(""),o=Object(r.a)(i,2),d=o[0],l=o[1];return Object(h.jsxs)("div",{className:j.a.postContainer,children:[Object(h.jsx)(f,{className:j.a.hideElem,text:d,onClick:function(){a((function(e){return!e})),l((function(t){return!1===s?"":e.user?e.user:"Anonymous"}))}}),s&&Object(h.jsx)("div",{className:j.a.Post,children:Object(h.jsxs)("div",{children:[Object(h.jsx)(x,{src:e.image}),Object(h.jsxs)("div",{className:j.a.posterInfo,children:[Object(h.jsx)("div",{id:"user",children:e.user?e.user:"Anonymous"}),Object(h.jsx)("div",{children:e.title}),e.time&&Object(h.jsx)("div",{children:e.time.toDate().toDateString()+" "+e.time.toDate().toLocaleTimeString()}),Object(h.jsxs)("div",{className:"postNo",children:["No. ",e.postNo]})]}),Object(h.jsx)("p",{className:j.a.postText,children:e.text})]})})]})},N=n(16),g=n(18),S=n.n(g),_=n(21),C=n(32),y=n.n(C),T=function(e){return Object(h.jsx)("button",{onClick:e.onClick,className:y.a.button,children:e.children})};n(45);var I=function(e){var t=Object(c.useState)(""),n=Object(r.a)(t,2),s=n[0],a=n[1],i=Object(c.useState)(""),d=Object(r.a)(i,2),l=d[0],j=d[1],u=Object(c.useState)(""),b=Object(r.a)(u,2),x=b[0],p=b[1],O=Object(c.useState)(null),m=Object(r.a)(O,2),f=m[0],v=m[1];function N(){return g.apply(this,arguments)}function g(){return(g=Object(_.a)(S.a.mark((function e(){var t,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o.b.firestore(),n=o.b.firestore.FieldValue.increment(1),t.collection("meta").doc("data").update({postNo:n});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return o.b.firestore().collection("meta").doc("data").get().then((function(e){return e.exists?e.data().postNo:0}))}function y(){a(""),j(""),p(""),v(null)}function I(e,t,n,c){return k.apply(this,arguments)}function k(){return(k=Object(_.a)(S.a.mark((function t(n,c,s,a){var i,r,d;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=o.b.firestore(),t.next=3,C();case 3:r=t.sent,d=i.collection("board"),!1===e.thread&&(d=i.collection("board").doc(e.id).collection("posts")),d.add({user:n,text:c,title:s,postNo:r,created:o.b.firestore.FieldValue.serverTimestamp(),image:a}).then((function(){N().then((function(){e.onSubmit(),e.openCloseForm()}))})).catch((function(e){}));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var D=function(e){v(e.target.files[0])},A=function(){var t=Object(_.a)(S.a.mark((function t(n){var c,a,i;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),e.onSubmit(),null!==f){t.next=7;break}I(s,l,x,""),y(),t.next=13;break;case 7:return c=f,a=o.b.storage().ref(),i=a.child(c.name),t.next=12,i.put(c);case 12:i.getDownloadURL().then((function(e){I(s,l,x,e),y()}));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"Form",children:Object(h.jsxs)("form",{onSubmit:function(e){A(e)},className:"addForm",children:[Object(h.jsx)("input",{placeholder:"name",value:s,type:"text",onChange:function(e){a(e.target.value)},className:"postName",maxLength:"25"}),Object(h.jsx)("input",{placeholder:"title",value:x,type:"text",onChange:function(e){p(e.target.value)},className:"postTitle",maxLength:"30"}),Object(h.jsx)("textarea",{placeholder:"comment",value:l,type:"text",onChange:function(e){j(e.target.value)},required:!0,className:"postText",maxLength:"1000"}),e.thread?Object(h.jsx)("input",{className:"postFile",type:"file",onChange:D,required:!0}):Object(h.jsx)("input",{className:"postFile",type:"file",onChange:D}),Object(h.jsx)(T,{className:"postSubmit",children:"Submit"})]})})},k=(n(46),function(e){return Object(h.jsxs)("div",{className:"lds-roller",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{})]})});var D=function(e){var t=Object(c.useState)(!1),n=Object(r.a)(t,2),s=n[0],a=n[1],i=Object(c.useState)(!1),o=Object(r.a)(i,2),d=o[0],l=o[1];function j(){a((function(e){return!e}))}return d?Object(h.jsx)("div",{className:"loaderContainer",children:Object(h.jsx)(k,{})}):Object(h.jsx)("div",{children:s?Object(h.jsxs)("div",{children:[Object(h.jsx)(I,{openCloseForm:j,id:e.id,thread:e.thread,onSubmit:function(){l((function(e){return!e}))}}),Object(h.jsx)("div",{className:"showButton",children:Object(h.jsx)(T,{onClick:j,children:"Close"})})]}):Object(h.jsx)("div",{className:"showButton",children:Object(h.jsx)(T,{onClick:j,children:"Add a ".concat(e.thread?"Thread!":"comment!")})})})},A=n(33),B=n.n(A),w=n(34),F=function(e){return Object(h.jsxs)("div",{className:B.a.expandThread,children:[Object(h.jsxs)("div",{children:[e.postNo-3," posts omitted."]}),Object(h.jsx)(w.a,{onClick:e.onClick,color:"#00ff46",style:{cursor:"pointer"},size:"1.5em"})]})};var P=function(e){var t=Object(c.useState)([]),n=Object(r.a)(t,2),s=n[0],a=n[1],i=Object(c.useState)(!1),d=Object(r.a)(i,2),l=d[0],j=d[1],u=Object(c.useState)(!0),b=Object(r.a)(u,2),p=b[0],O=b[1],m=Object(c.useState)("close"),g=Object(r.a)(m,2),S=g[0],_=g[1],C=Object(c.useState)(!1),y=Object(r.a)(C,2),T=y[0],I=y[1],k=Object(c.useState)(0),A=Object(r.a)(k,2),B=A[0],w=A[1],P=function(t){var n=o.b.firestore();("expand"==t?n.collection("board").doc(e.id).collection("posts").orderBy("postNo","desc"):n.collection("board").doc(e.id).collection("posts").orderBy("postNo","desc").limit(3)).onSnapshot((function(e){var t=e.docs.map((function(e){var t=e.data();return t.id=e.id,t}));t.reverse(),a(t)}))};function E(){j((function(e){return!e}))}return Object(c.useEffect)((function(){o.b.firestore().collection("board").doc(e.id).collection("posts").get().then((function(e){w(e.size)})),P("nope")}),[]),Object(h.jsxs)("div",{className:"Thread",children:[Object(h.jsx)(f,{text:S,onClick:function(){O((function(e){return!e})),_((function(t){return"close"==t?e.user?e.user:"Anyonymous":"close"}))}}),p&&Object(h.jsxs)("div",{className:"threadContainer",children:[l&&Object(h.jsx)(D,{hidden:!0,thread:!1,id:e.id}),Object(h.jsxs)("div",{className:"threadInfo",children:[Object(h.jsx)(x,{src:e.image}),Object(h.jsxs)("div",{className:"threadInfoContainer",children:[Object(h.jsx)("div",{className:"user",id:"user",children:e.user?e.user:"Anyonymous"}),Object(h.jsx)("div",{className:"title",children:e.title?e.title:"Thread"}),e.time?Object(h.jsx)("div",{className:"time",children:e.time.toDate().toDateString()+" "+e.time.toDate().toLocaleTimeString()}):null,Object(h.jsxs)(N.b,{style:{textDecoration:"none",color:"inherit"},to:"/thread/".concat(e.postNo),children:["No. ",e.postNo]})]}),Object(h.jsx)("div",{className:"postText",children:Object(h.jsx)("p",{children:e.text})}),T||B-3<=0?null:Object(h.jsx)(F,{onClick:function(){I(!0),P("expand")},postNo:B})]}),s.map((function(e){return Object(h.jsx)(v,{id:e.id,postNo:e.postNo,title:e.title,time:e.created,text:e.text,image:e.image,user:e.user,clickReply:E},e.id)})),Object(h.jsx)(D,{thread:!1,id:e.id})]})]})},E=function(e){return Object(h.jsx)("div",{className:"Threads",children:e.threadArray.map((function(e){return Object(h.jsx)(P,{id:e.id,postNo:e.postNo,title:e.title,time:e.created,text:e.text,image:e.image,user:e.user},e.id)}))})};n(54);var H=function(e){return Object(h.jsxs)("div",{className:"header",children:[Object(h.jsx)(N.b,{to:"/",children:Object(h.jsx)("h1",{children:e.chan})}),Object(h.jsx)("p",{children:e.desc})]})},L=n(25),R=n.n(L),z=function(){var e=Object(d.f)(),t=Object(c.useState)([]),n=Object(r.a)(t,2),s=n[0],a=n[1],i=Object(c.useState)([]),l=Object(r.a)(i,2),j=l[0],u=l[1];Object(c.useEffect)((function(){o.b.firestore().collection("board").where("postNo","==",parseInt(e.threadID)).onSnapshot((function(e){var t=e.docs.map((function(e){var t=e.data();return t.id=e.id,t}));console.log(t),u(t),b(t[0].id)}))}),[]);var b=function(e){o.b.firestore().collection("board").doc(e).collection("posts").orderBy("postNo","desc").onSnapshot((function(e){var t=e.docs.map((function(e){var t=e.data();return t.id=e.id,t}));t.reverse(),a(t)}))};return 0===j.length?null:Object(h.jsx)("div",{className:R.a.Thread,children:Object(h.jsxs)("div",{className:"threadContainer",children:[Object(h.jsxs)("div",{className:"threadInfo",children:[Object(h.jsx)(x,{src:j[0].image}),Object(h.jsxs)("div",{className:"threadInfoContainer",children:[Object(h.jsx)("div",{className:"user",id:"user",children:j[0].user?j[0].user:"Anyonymous"}),Object(h.jsx)("div",{className:"title",children:j[0].title?j[0].title:"Thread"}),j[0].created&&Object(h.jsx)("div",{className:"time",children:j[0].created.toDate().toDateString()+" "+j[0].created.toDate().toLocaleTimeString()}),Object(h.jsxs)("div",{children:["No. ",j[0].postNo]})]}),Object(h.jsx)("div",{className:"postText",children:Object(h.jsx)("p",{children:j[0].text})})]}),s.map((function(e,t){return Object(h.jsx)(v,{id:e.id,postNo:e.postNo,title:e.title,time:e.created,text:e.text,image:e.image,user:e.user},t)})),Object(h.jsx)(D,{thread:!1,id:j[0].id})]})})};var q=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],s=t[1];return Object(c.useEffect)((function(){o.b.firestore().collection("board").orderBy("created","desc").onSnapshot((function(e){var t=e.docs.map((function(e){var t=e.data();return t.id=e.id,t}));s(t)}))}),[]),Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(H,{chan:"Beschan",desc:"A safe space for your catboy fantasies"}),Object(h.jsxs)(d.c,{children:[Object(h.jsxs)(d.a,{exact:!0,path:"/",children:[Object(h.jsx)(D,{thread:!0}),Object(h.jsx)("main",{children:Object(h.jsx)(E,{threadArray:n})})]}),Object(h.jsx)(d.a,{path:"/thread/:threadID",children:Object(h.jsx)(z,{})})]})]})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),s(e),a(e),i(e)}))};n(57),n(58);o.b.initializeApp({apiKey:"AIzaSyA9ApQ3Mhbga323RYlXqaW8X73QWtvprAg",authDomain:"bes-chan.firebaseapp.com",projectId:"bes-chan",storageBucket:"bes-chan.appspot.com",messagingSenderId:"889845667798",appId:"1:889845667798:web:e97a653a43abfcf0963677",measurementId:"G-MHY6F8BPC5"}),i.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(N.a,{children:Object(h.jsx)(q,{})})}),document.getElementById("root")),J()}},[[56,1,2]]]);
//# sourceMappingURL=main.817e1a9d.chunk.js.map