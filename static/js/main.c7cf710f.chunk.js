(this["webpackJsonpbes-chan"]=this["webpackJsonpbes-chan"]||[]).push([[0],{20:function(e,t,c){e.exports={hideContainer:"HideElement_hideContainer__3kN_x",square:"HideElement_square__3tvML",text:"HideElement_text__3KNsx"}},24:function(e,t,c){e.exports={expandThread:"ExpandThread_expandThread__N25cj",expand:"ExpandThread_expand__2uuWh"}},28:function(e,t,c){e.exports={postImage:"Image_postImage__2_ySV"}},29:function(e,t,c){e.exports={button:"Button_button__6-R6B"}},35:function(e,t,c){},36:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){},41:function(e,t,c){},42:function(e,t,c){},50:function(e,t,c){},52:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c.n(n),s=c(27),i=c.n(s),r=(c(35),c(5)),o=(c(36),c(4)),d=c(6),l=(c(37),c(38),c(28)),j=c.n(l),u=c(1),b=function(e){var t=Object(n.useState)({maxHeight:"15vh"}),c=Object(r.a)(t,2),a=c[0],s=c[1];return Object(u.jsx)("img",{onClick:function(){"15vh"===a.maxHeight?s({maxHeight:"45vh"}):s({maxHeight:"15vh"})},src:e.src,className:j.a.postImage,style:a})};var h=function(e){return Object(u.jsx)("div",{className:"Post",children:Object(u.jsxs)("div",{className:"postContainer",children:[Object(u.jsx)(b,{src:e.image}),Object(u.jsxs)("div",{className:"posterInfo",children:[Object(u.jsx)("div",{id:"user",children:"Anonymous"}),Object(u.jsx)("div",{children:e.title}),e.time&&Object(u.jsx)("div",{children:e.time.toDate().toDateString()+" "+e.time.toDate().toLocaleTimeString()}),Object(u.jsxs)("div",{className:"postNo",onClick:function(){return e.clickReply(e.postNo)},children:["No. ",e.postNo]})]}),Object(u.jsx)("p",{className:"postText",children:e.text})]})})},x=c(15),p=c(17),m=c.n(p),O=c(19),f=c(29),v=c.n(f),N=function(e){return Object(u.jsx)("button",{onClick:e.onClick,className:v.a.button,children:e.children})};c(41);var g=function(e){var t=Object(n.useState)(""),c=Object(r.a)(t,2),a=c[0],s=c[1],i=Object(n.useState)(""),d=Object(r.a)(i,2),l=d[0],j=d[1],b=Object(n.useState)(""),h=Object(r.a)(b,2),x=h[0],p=h[1],f=Object(n.useState)(null),v=Object(r.a)(f,2),g=v[0],S=v[1];function C(){return y.apply(this,arguments)}function y(){return(y=Object(O.a)(m.a.mark((function e(){var t,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o.b.firestore(),c=o.b.firestore.FieldValue.increment(1),t.collection("meta").doc("data").update({postNo:c});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return o.b.firestore().collection("meta").doc("data").get().then((function(e){return e.exists?e.data().postNo:0}))}function _(){s(""),j(""),p(""),S(null)}function T(e,t,c,n){return I.apply(this,arguments)}function I(){return(I=Object(O.a)(m.a.mark((function t(c,n,a,s){var i,r,d;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=o.b.firestore(),t.next=3,k();case 3:r=t.sent,d=i.collection("board"),!1===e.thread&&(d=i.collection("board").doc(e.id).collection("posts")),d.add({user:c,text:n,title:a,postNo:r,created:o.b.firestore.FieldValue.serverTimestamp(),image:s}).then((function(){C().then((function(){e.onSubmit(),e.openCloseForm()}))})).catch((function(e){}));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var D=function(e){S(e.target.files[0])},A=function(){var t=Object(O.a)(m.a.mark((function t(c){var n,s,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c.preventDefault(),e.onSubmit(),null!==g){t.next=7;break}T(a,l,x,""),_(),t.next=13;break;case 7:return n=g,s=o.b.storage().ref(),i=s.child(n.name),t.next=12,i.put(n);case 12:i.getDownloadURL().then((function(e){T(a,l,x,e),_()}));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(u.jsx)("div",{className:"Form",children:Object(u.jsxs)("form",{onSubmit:function(e){A(e)},className:"addForm",children:[Object(u.jsx)("input",{placeholder:"name",value:a,type:"text",onChange:function(e){s(e.target.value)},className:"postName",maxLength:"25"}),Object(u.jsx)("input",{placeholder:"title",value:x,type:"text",onChange:function(e){p(e.target.value)},className:"postTitle",maxLength:"30"}),Object(u.jsx)("textarea",{placeholder:"comment",value:l,type:"text",onChange:function(e){j(e.target.value)},required:!0,className:"postText",maxLength:"1000"}),e.thread?Object(u.jsx)("input",{className:"postFile",type:"file",onChange:D,required:!0}):Object(u.jsx)("input",{className:"postFile",type:"file",onChange:D}),Object(u.jsx)(N,{className:"postSubmit",children:"Submit"})]})})},S=(c(42),function(e){return Object(u.jsxs)("div",{className:"lds-roller",children:[Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{})]})});var C=function(e){var t=Object(n.useState)(!1),c=Object(r.a)(t,2),a=c[0],s=c[1],i=Object(n.useState)(!1),o=Object(r.a)(i,2),d=o[0],l=o[1];function j(){s((function(e){return!e}))}return d?Object(u.jsx)("div",{className:"loaderContainer",children:Object(u.jsx)(S,{})}):Object(u.jsx)("div",{children:a?Object(u.jsxs)("div",{children:[Object(u.jsx)(g,{openCloseForm:j,id:e.id,thread:e.thread,onSubmit:function(){l((function(e){return!e}))}}),Object(u.jsx)("div",{className:"showButton",children:Object(u.jsx)(N,{onClick:j,children:"Close"})})]}):Object(u.jsx)("div",{className:"showButton",children:Object(u.jsx)(N,{onClick:j,children:"Add a ".concat(e.thread?"Thread!":"comment!")})})})},y=c(20),k=c.n(y),_=function(e){return Object(u.jsxs)("div",{onClick:e.onClick,className:k.a.hideContainer,children:[Object(u.jsx)("button",{className:k.a.square}),Object(u.jsx)("div",{className:k.a.text,children:e.text})]})},T=c(24),I=c.n(T),D=function(e){return Object(u.jsxs)("div",{className:I.a.expandThread,children:[Object(u.jsx)("div",{children:"Icon :^)"}),Object(u.jsxs)("div",{children:[e.postNo-3," posts omitted."]}),Object(u.jsx)("div",{onClick:e.onClick,className:I.a.expand,children:"Click to expand."})]})};var A=function(e){var t=Object(n.useState)([]),c=Object(r.a)(t,2),a=c[0],s=c[1],i=Object(n.useState)(!1),d=Object(r.a)(i,2),l=d[0],j=d[1],p=Object(n.useState)(!0),m=Object(r.a)(p,2),O=m[0],f=m[1],v=Object(n.useState)("close"),N=Object(r.a)(v,2),g=N[0],S=N[1],y=Object(n.useState)(!1),k=Object(r.a)(y,2),T=k[0],I=k[1],A=Object(n.useState)(0),w=Object(r.a)(A,2),B=w[0],F=w[1],L=function(t){var c=o.b.firestore();("expand"==t?c.collection("board").doc(e.id).collection("posts").orderBy("postNo","desc"):c.collection("board").doc(e.id).collection("posts").orderBy("postNo","desc").limit(3)).onSnapshot((function(e){var t=e.docs.map((function(e){var t=e.data();return t.id=e.id,t}));t.reverse(),s(t)}))};function E(){j((function(e){return!e}))}return Object(n.useEffect)((function(){o.b.firestore().collection("board").doc(e.id).collection("posts").get().then((function(e){F(e.size)})),L("nope")}),[]),Object(u.jsxs)("div",{className:"Thread",children:[Object(u.jsx)(_,{text:g,onClick:function(){f((function(e){return!e})),S((function(t){return"close"==t?e.user?e.user:"Anyonymous":"close"}))}}),O&&Object(u.jsxs)("div",{className:"threadContainer",children:[l&&Object(u.jsx)(C,{hidden:!0,thread:!1,id:e.id}),Object(u.jsxs)("div",{className:"threadInfo",children:[Object(u.jsx)(b,{src:e.image}),Object(u.jsxs)("div",{className:"threadInfoContainer",children:[Object(u.jsx)("div",{className:"user",id:"user",children:e.user?e.user:"Anyonymous"}),Object(u.jsx)("div",{className:"title",children:e.title?e.title:"Thread"}),e.time?Object(u.jsx)("div",{className:"time",children:e.time.toDate().toDateString()+" "+e.time.toDate().toLocaleTimeString()}):null,Object(u.jsxs)(x.b,{to:"/thread/".concat(e.postNo),children:["No. ",e.postNo]})]}),Object(u.jsx)("div",{className:"postText",children:Object(u.jsx)("p",{children:e.text})}),T||B-3<=0?null:Object(u.jsx)(D,{onClick:function(){I(!0),L("expand")},postNo:B})]}),a.map((function(e,t){return Object(u.jsx)(h,{id:e.id,postNo:e.postNo,title:e.title,time:e.created,text:e.text,image:e.image,user:e.user,clickReply:E},e.id)})),Object(u.jsx)(C,{thread:!1,id:e.id})]})]})},w=function(e){return Object(u.jsx)("div",{className:"Threads",children:e.threadArray.map((function(e){return Object(u.jsx)(A,{id:e.id,postNo:e.postNo,title:e.title,time:e.created,text:e.text,image:e.image,user:e.user},e.id)}))})};c(50);var B=function(e){return Object(u.jsxs)("div",{className:"header",children:[Object(u.jsx)(x.b,{to:"/bes-chan/",children:Object(u.jsx)("h1",{children:e.chan})}),Object(u.jsx)("p",{children:e.desc})]})},F=function(){var e=Object(d.f)(),t=Object(n.useState)([]),c=Object(r.a)(t,2),a=c[0],s=c[1],i=Object(n.useState)([]),l=Object(r.a)(i,2),j=l[0],x=l[1];Object(n.useEffect)((function(){o.b.firestore().collection("board").where("postNo","==",parseInt(e.threadID)).onSnapshot((function(e){var t=e.docs.map((function(e){var t=e.data();return t.id=e.id,t}));console.log(t),x(t),p(t[0].id)}))}),[]);var p=function(e){o.b.firestore().collection("board").doc(e).collection("posts").orderBy("postNo","desc").onSnapshot((function(e){var t=e.docs.map((function(e){var t=e.data();return t.id=e.id,t}));t.reverse(),s(t)}))};return 0===j.length?null:Object(u.jsx)("div",{className:"Thread",children:Object(u.jsxs)("div",{className:"threadContainer",children:[Object(u.jsxs)("div",{className:"threadInfo",children:[Object(u.jsx)(b,{src:j[0].image}),Object(u.jsxs)("div",{className:"threadInfoContainer",children:[Object(u.jsx)("div",{className:"user",id:"user",children:j[0].user?j[0].user:"Anyonymous"}),Object(u.jsx)("div",{className:"title",children:j[0].title?j[0].title:"Thread"}),j[0].created&&Object(u.jsx)("div",{className:"time",children:j[0].created.toDate().toDateString()+" "+j[0].created.toDate().toLocaleTimeString()}),Object(u.jsxs)("div",{children:["No. ",j[0].postNo]})]}),Object(u.jsx)("div",{className:"postText",children:Object(u.jsx)("p",{children:j[0].text})})]}),a.map((function(e,t){return Object(u.jsx)(h,{id:e.id,postNo:e.postNo,title:e.title,time:e.created,text:e.text,image:e.image,user:e.user},t)})),Object(u.jsx)(C,{thread:!1,id:j[0].id})]})})};var L=function(){var e=Object(n.useState)([]),t=Object(r.a)(e,2),c=t[0],a=t[1];return Object(n.useEffect)((function(){o.b.firestore().collection("board").orderBy("created","desc").onSnapshot((function(e){var t=e.docs.map((function(e){var t=e.data();return t.id=e.id,t}));a(t)}))}),[]),Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(B,{chan:"Beschan",desc:"A safe space for your catboy fantasies"}),Object(u.jsxs)(d.c,{children:[Object(u.jsxs)(d.a,{exact:!0,path:"/bes-chan/",children:[Object(u.jsx)(C,{thread:!0}),Object(u.jsx)(w,{threadArray:c})]}),Object(u.jsx)(d.a,{path:"/bes-chan/thread/:threadID",children:Object(u.jsx)(F,{})})]})]})},E=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,55)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;c(e),n(e),a(e),s(e),i(e)}))};c(53),c(54);o.b.initializeApp({apiKey:"AIzaSyA9ApQ3Mhbga323RYlXqaW8X73QWtvprAg",authDomain:"bes-chan.firebaseapp.com",projectId:"bes-chan",storageBucket:"bes-chan.appspot.com",messagingSenderId:"889845667798",appId:"1:889845667798:web:e97a653a43abfcf0963677",measurementId:"G-MHY6F8BPC5"}),i.a.render(Object(u.jsx)(x.a,{children:Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(L,{})})}),document.getElementById("root")),E()}},[[52,1,2]]]);
//# sourceMappingURL=main.c7cf710f.chunk.js.map