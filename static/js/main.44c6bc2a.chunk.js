(this["webpackJsonpbes-chan"]=this["webpackJsonpbes-chan"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){e.exports={hideContainer:"HideElement_hideContainer__3kN_x",square:"HideElement_square__3tvML",text:"HideElement_text__3KNsx"}},,function(e,t,n){e.exports={expandThread:"ExpandThread_expandThread__N25cj",expand:"ExpandThread_expand__2uuWh"}},,,function(e,t,n){e.exports={postImage:"Image_postImage__2_ySV"}},,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),s=n(16),i=n.n(s),o=(n(22),n(9)),r=n.n(o),d=n(11),l=n(6),u=(n(24),n(4)),j=(n(25),n(26),n(17)),b=n.n(j),h=n(1),p=function(e){var t=Object(c.useState)({maxHeight:"15vh"}),n=Object(l.a)(t,2),a=n[0],s=n[1];return Object(h.jsx)("img",{onClick:function(){"15vh"===a.maxHeight?s({maxHeight:"45vh"}):s({maxHeight:"15vh"})},src:e.src,className:b.a.postImage,style:a})};var x=function(e){return Object(h.jsx)("div",{className:"Post",children:Object(h.jsxs)("div",{className:"postContainer",children:[Object(h.jsx)(p,{src:e.image}),Object(h.jsxs)("div",{className:"posterInfo",children:[Object(h.jsx)("div",{id:"user",children:"Anonymous"}),Object(h.jsx)("div",{children:e.title}),e.time&&Object(h.jsx)("div",{children:e.time.toDate().toDateString()+" "+e.time.toDate().toLocaleTimeString()}),Object(h.jsxs)("div",{className:"postNo",onClick:function(){return e.clickReply(e.postNo)},children:["No. ",e.postNo]})]}),Object(h.jsx)("p",{class:"postText",children:e.text})]})})};n(28);var m=function(e){var t=Object(c.useState)(""),n=Object(l.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(""),o=Object(l.a)(i,2),j=o[0],b=o[1],p=Object(c.useState)(""),x=Object(l.a)(p,2),m=x[0],f=x[1],O=Object(c.useState)(null),v=Object(l.a)(O,2),N=v[0],g=v[1];function C(){return S.apply(this,arguments)}function S(){return(S=Object(d.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=u.b.firestore(),n=u.b.firestore.FieldValue.increment(1),t.collection("meta").doc("data").update({postNo:n});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return u.b.firestore().collection("meta").doc("data").get().then((function(e){return e.exists?e.data().postNo:0}))}function k(){s(""),b(""),f(""),g(null)}function _(e,t,n,c){return T.apply(this,arguments)}function T(){return(T=Object(d.a)(r.a.mark((function t(n,c,a,s){var i,o,d;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.b.firestore(),t.next=3,y();case 3:o=t.sent,d=i.collection("board"),!1===e.thread&&(d=i.collection("board").doc(e.id).collection("posts")),d.add({user:n,text:c,title:a,postNo:o,created:u.b.firestore.FieldValue.serverTimestamp(),image:s}).then((function(){C().then((function(){e.onSubmit(),e.openCloseForm()}))})).catch((function(e){console.log(e)}));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var I=function(e){g(e.target.files[0])},F=function(){var t=Object(d.a)(r.a.mark((function t(n){var c,s,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),e.onSubmit(),null!==N){t.next=7;break}_(a,j,m,""),k(),t.next=13;break;case 7:return c=N,s=u.b.storage().ref(),i=s.child(c.name),t.next=12,i.put(c);case 12:i.getDownloadURL().then((function(e){_(a,j,m,e),k()}));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"Form",children:Object(h.jsxs)("form",{onSubmit:function(e){F(e)},className:"addForm",children:[Object(h.jsx)("input",{placeholder:"name",value:a,type:"text",onChange:function(e){s(e.target.value)},className:"postName",maxLength:"25"}),Object(h.jsx)("input",{placeholder:"title",value:m,type:"text",onChange:function(e){f(e.target.value)},className:"postTitle",maxLength:"30"}),Object(h.jsx)("textarea",{placeholder:"comment",value:j,type:"text",onChange:function(e){b(e.target.value)},required:!0,className:"postText",maxLength:"1000"}),e.thread?Object(h.jsx)("input",{className:"postFile",type:"file",onChange:I,required:!0}):Object(h.jsx)("input",{className:"postFile",type:"file",onChange:I}),Object(h.jsx)("button",{className:"postSubmit",children:"Submit"})]})})},f=(n(29),function(e){return Object(h.jsxs)("div",{className:"lds-roller",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{})]})});var O=function(e){var t=Object(c.useState)(!1),n=Object(l.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(!1),o=Object(l.a)(i,2),r=o[0],d=o[1];function u(){s((function(e){return!e}))}return r?Object(h.jsx)("div",{className:"loaderContainer",children:Object(h.jsx)(f,{})}):Object(h.jsx)("div",{children:a?Object(h.jsxs)("div",{children:[Object(h.jsx)(m,{openCloseForm:u,id:e.id,thread:e.thread,onSubmit:function(){d((function(e){return!e}))}}),Object(h.jsx)("button",{onClick:u,children:"Close"})]}):Object(h.jsx)("div",{className:"showButton",children:Object(h.jsx)("button",{className:"showButton",onClick:u,children:"Add a ".concat(e.thread?"Thread!":"comment!")})})})},v=n(12),N=n.n(v),g=function(e){return Object(h.jsxs)("div",{onClick:e.onClick,className:N.a.hideContainer,children:[Object(h.jsx)("button",{className:N.a.square}),Object(h.jsx)("div",{className:N.a.text,children:e.text})]})},C=n(14),S=n.n(C),y=function(e){return Object(h.jsxs)("div",{className:S.a.expandThread,children:[Object(h.jsx)("div",{children:"Icon :^)"}),Object(h.jsxs)("div",{children:[e.postNo-3," posts omitted."]}),Object(h.jsx)("div",{onClick:e.onClick,className:S.a.expand,children:"Click to expand."})]})};var k=function(e){var t=Object(c.useState)([]),n=Object(l.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(!1),o=Object(l.a)(i,2),r=o[0],d=o[1],j=Object(c.useState)(!0),b=Object(l.a)(j,2),m=b[0],f=b[1],v=Object(c.useState)("close"),N=Object(l.a)(v,2),C=N[0],S=N[1],k=Object(c.useState)(!1),_=Object(l.a)(k,2),T=_[0],I=_[1],F=Object(c.useState)(0),w=Object(l.a)(F,2),A=w[0],B=w[1];function D(t){var n=u.b.firestore(),c=[];console.log(t),c="mode"==t?n.collection("board").doc(e.id).collection("posts").orderBy("postNo","desc"):n.collection("board").doc(e.id).collection("posts").orderBy("postNo","desc").limit(3),console.log(c),c.onSnapshot((function(e){var t=e.docs.map((function(e){var t=e.data();return t.id=e.id,t}));t.reverse(),s(t)}))}function L(){d((function(e){return!e}))}return Object(c.useEffect)((function(){u.b.firestore().collection("board").doc(e.id).collection("posts").get().then((function(e){B(e.size)})),D("nope")}),[]),Object(h.jsxs)("div",{className:"Thread",children:[Object(h.jsx)(g,{text:C,onClick:function(){f((function(e){return!e})),S((function(t){return"close"==t?e.user?e.user:"Anyonymous":"close"}))}}),m&&Object(h.jsxs)("div",{className:"threadContainer",children:[r&&Object(h.jsx)(O,{hidden:!0,thread:!1,id:e.id}),Object(h.jsxs)("div",{className:"threadInfo",children:[Object(h.jsx)(p,{src:e.image}),Object(h.jsxs)("div",{className:"threadInfoContainer",children:[Object(h.jsx)("div",{className:"user",id:"user",children:e.user?e.user:"Anyonymous"}),Object(h.jsx)("div",{className:"title",children:e.title?e.title:"Thread"}),e.time?Object(h.jsx)("div",{className:"time",children:e.time.toDate().toDateString()+" "+e.time.toDate().toLocaleTimeString()}):null,Object(h.jsxs)("div",{className:"postNo",onClick:function(){return L()},children:["No. ",e.postNo]})]}),Object(h.jsx)("div",{className:"postText",children:Object(h.jsx)("p",{children:e.text})}),T||A-3<=0?null:Object(h.jsx)(y,{onClick:function(){I(!0),D("mode")},postNo:A})]}),a.map((function(e,t){return Object(h.jsx)(x,{id:e.id,postNo:e.postNo,title:e.title,time:e.created,text:e.text,image:e.image,user:e.user,clickReply:L},t)})),Object(h.jsx)(O,{thread:!1,id:e.id})]})]})};n(30);var _=function(e){return Object(h.jsxs)("div",{className:"header",children:[Object(h.jsx)("h1",{children:e.chan}),Object(h.jsx)("p",{children:e.desc})]})};var T=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){u.b.firestore().collection("board").orderBy("created","desc").onSnapshot((function(e){var t=e.docs.map((function(e){var t=e.data();return t.id=e.id,t}));a(t)}))}),[]),Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(_,{chan:"Beschan",desc:"A safe space for your catboy fantasies"}),Object(h.jsx)(O,{thread:!0}),Object(h.jsx)("div",{className:"Threads",children:n.map((function(e,t){return Object(h.jsx)(k,{id:e.id,postNo:e.postNo,title:e.title,time:e.created,text:e.text,image:e.image,user:e.user},t)}))})]})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,35)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),s(e),i(e)}))};n(33),n(34);u.b.initializeApp({apiKey:"AIzaSyA9ApQ3Mhbga323RYlXqaW8X73QWtvprAg",authDomain:"bes-chan.firebaseapp.com",projectId:"bes-chan",storageBucket:"bes-chan.appspot.com",messagingSenderId:"889845667798",appId:"1:889845667798:web:e97a653a43abfcf0963677",measurementId:"G-MHY6F8BPC5"}),i.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(T,{})}),document.getElementById("root")),I()}],[[32,1,2]]]);
//# sourceMappingURL=main.44c6bc2a.chunk.js.map